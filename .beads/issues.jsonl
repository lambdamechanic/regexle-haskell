{"id":"regex-1","title":"Regexle SBV reimplementation and benchmarking","description":"","status":"in_progress","priority":2,"issue_type":"epic","created_at":"2025-10-23T08:06:47.867161197+07:00","updated_at":"2025-10-26T07:44:37.854879636+07:00"}
{"id":"regex-10","title":"Add sydtest test suite","description":"Set up sydtest-based test suite for the Haskell project and cover Regexle.PuzzleCache functionality.","notes":"Added sydtest-based test suite (test-suite spec) with dependencies (sydtest, sydtest-aeson, sydtest-discover, temporary). Implemented PuzzleCacheSpec verifying cache path honors XDG_CACHE_HOME and fetchPuzzle reads cached JSON without network by pre-populating temp cache. cabal test now runs via sydtest-discover.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T08:51:41.790278076+07:00","updated_at":"2025-10-23T08:58:21.134200156+07:00","closed_at":"2025-10-23T08:58:21.134200156+07:00","dependencies":[{"issue_id":"regex-10","depends_on_id":"regex-7","type":"discovered-from","created_at":"2025-10-23T08:51:41.806412056+07:00","created_by":"mark"},{"issue_id":"regex-10","depends_on_id":"regex-1","type":"blocks","created_at":"2025-10-23T08:51:41.810688719+07:00","created_by":"mark"}]}
{"id":"regex-11","title":"Implement hot-solver path with SBV query mode","description":"Goal: reuse a single Z3 session via SBV’s query mode so we avoid re-emitting constraints every puzzle. See docs/hot-solver-sbv-notes.md for current findings (profiling, blocked experiment) and required work (freshVar-based grid rebuild, resetAssertions lifecycle, post-change profiling).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T22:04:17.379914938+07:00","updated_at":"2025-10-26T07:00:06.216443771+07:00","closed_at":"2025-10-26T07:00:06.216443771+07:00"}
{"id":"regex-12","title":"Prototype direct Z3 backend","description":"Replace SBV with a thin Z3 binding so we can keep solver contexts hot, encode DFAs with native arrays, and avoid SMT-LIB emission. See docs/direct-z3-plan.md for rationale, task breakdown, and open questions.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-10-25T22:04:36.171541504+07:00","updated_at":"2025-10-26T07:00:17.281786504+07:00"}
{"id":"regex-13","title":"Implement fastest Python method in Haskell solver","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-26T11:40:15.389835606+07:00","updated_at":"2025-10-26T11:52:01.94422431+07:00","closed_at":"2025-10-26T11:52:01.94422431+07:00"}
{"id":"regex-14","title":"Add DFA/lambda caching across clues","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-26T13:55:16.663335086+07:00","updated_at":"2025-10-26T14:29:04.722065544+07:00","closed_at":"2025-10-26T14:29:04.722065544+07:00"}
{"id":"regex-15","title":"Analyze solver stats to target solve-time gap","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-26T13:55:28.068729498+07:00","updated_at":"2025-10-26T14:12:52.0487421+07:00","closed_at":"2025-10-26T14:12:52.0487421+07:00"}
{"id":"regex-16","title":"Improve dead-letter pruning with adaptive positive domains","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-26T13:55:40.285181649+07:00","updated_at":"2025-10-26T14:12:58.140936296+07:00","closed_at":"2025-10-26T14:12:58.140936296+07:00"}
{"id":"regex-17","title":"Document stats workflow (profiles + render script)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-26T13:55:53.517923173+07:00","updated_at":"2025-10-26T14:13:03.835888977+07:00","closed_at":"2025-10-26T14:13:03.835888977+07:00"}
{"id":"regex-18","title":"Reuse direct Z3 grid across puzzles","description":"","notes":"Attempted to reuse direct Z3 solver with push/pop, but Z3 4.8.12 crashed (SIGSEGV) when solving multiple puzzles in one context. Rolled back the hot path for now; revisit once we can debug the upstream issue.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-10-26T14:31:43.223790839+07:00","updated_at":"2025-10-28T08:16:04.181538888+07:00"}
{"id":"regex-19","title":"Enable macro_finder in direct Z3 backend","description":"Experiment with Z3 solver parameters/tactics to close the remaining solve-time gap. First lever: turn on macro_finder for the direct backend and re-profile.","notes":"Set macro_finder=true via solver params in the direct backend, re-profiled side 3 days 400–409, and shaved solve time to ~14.3 ms (total 0.32 s wall).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-26T14:46:26.30597168+07:00","updated_at":"2025-10-26T14:46:51.182247555+07:00","closed_at":"2025-10-26T14:46:43.836880575+07:00"}
{"id":"regex-2","title":"Review nelhage regex resources","description":"Read nelhage-sandbox repo and blog post to extract existing SMT modeling and benchmarking approach for regex crosswords.","notes":"Reviewed nelhage-sandbox/regexle sources. Key takeaways: Python solver keeps regex cache, converts via greenery to minimized DFA, then flattens transitions + dead-state analysis for pruning (see third_party/nelhage-sandbox/regexle/src/regexle/main.py:1-520). Multiple matcher strategies exist: FuncMatcher encodes DFA as explicit z3.If ladder, z3.Function, or arrays; EnumMapper vs IntMapper toggles alphabet/state representation. Z3RE fallback uses native z3 regex encoding for comparison. Blog post (Oct 21 2025) documents major speedups from DFA encoding, pruning dead vocab, replacing UFs with explicit transition table, and benchmarking harness scanning regexle puzzles for runtime stats.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T08:06:56.37711539+07:00","updated_at":"2025-10-23T08:25:48.594566985+07:00","closed_at":"2025-10-23T08:25:48.594566985+07:00","dependencies":[{"issue_id":"regex-2","depends_on_id":"regex-1","type":"discovered-from","created_at":"2025-10-23T08:06:56.383279837+07:00","created_by":"mark"}]}
{"id":"regex-20","title":"Investigate Z3 4.15.3 hot-solver crash","description":"Hot direct-Z3 path crashes inside Z3_solver_get_model when auto_config=false/random_seed=7/phase_selection=0 are set before solving. Need minimal repro + upstream issue.","notes":"Repro: run \n  PATH=/opt/z3-4.15.3-x64-glibc-2.39/bin:/home/mark/.nix-profile/bin:/home/mark/bin:/home/mark/.nix-profile/bin:/nix/var/nix/profiles/default/bin:/tmp/.tmpCpome8:/home/mark/.nvm/versions/node/v22.20.0/lib/node_modules/@openai/codex/vendor/x86_64-unknown-linux-musl/path:/home/mark/.pyenv/shims:/home/mark/.pyenv/bin:/home/mark/.nix-profile/bin:/home/mark/bin:/home/mark/.cargo/bin:/home/mark/.local/bin/:/home/mark/.nix-profile/bin:/nix/var/nix/profiles/default/bin:/home/mark/.nvm/versions/node/v22.20.0/bin:/home/mark/.pyenv/bin:/home/mark/.sdkman/candidates/quarkus/current/bin:/home/mark/.sdkman/candidates/maven/current/bin:/home/mark/.sdkman/candidates/java/current/bin:/home/mark/.sdkman/candidates/gradle/current/bin:/home/mark/.cabal/bin:/home/mark/.ghcup/bin:/home/mark/.local/share/zinit/plugins/direnv---direnv:/home/mark/.atuin/bin:/home/mark/.deno/bin:/home/mark/.nix-profile/bin:/home/mark/bin:/home/mark/.cargo/bin:/home/mark/.local/bin/:/home/mark/.nix-profile/bin:/nix/var/nix/profiles/default/bin:/home/mark/.cargo/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/mark/.foundry/bin:/home/mark/.foundry/bin:/home/mark/.local/bin:/usr/lib/postgresql/17/bin:/home/mark/.foundry/bin:/home/mark/.local/bin:/usr/lib/postgresql/17/bin:/home/mark/.local/bin:/usr/lib/postgresql/17/bin   LD_LIBRARY_PATH=/opt/z3-4.15.3-x64-glibc-2.39/bin:   cabal run regexle-haskell -- profile --side 3 --days 400..409 --strategy z3 --hot-solver --output /tmp/profile-hot-debug.json\nwith configureZ3Solver setting auto_config=false, random_seed=7, phase_selection=0 and useMacroFinderTactic=True. After ~10 puzzles, z3 crashes:\n\nThread 1 regexle-haskell received signal SIGSEGV, Segmentation fault.\n0x00007ffff6fd8138 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\n#0  0x00007ffff6fd8138 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\n#1  0x00007ffff744c1c8 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\n#2  0x00007ffff7434c54 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\n#3  0x00007ffff7701b9c in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\n#4  0x00007ffff75a6fcc in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\n#5  0x00007ffff75b68e0 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\n#6  0x00007ffff737a3f5 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\n#7  0x00007ffff737d867 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\n#8  0x00007ffff7a233f3 in Z3_solver_get_model () from /lib/x86_64-linux-gnu/libz3.so.4\n\nSame command under gdb exits cleanly if we leave auto_config/seed/phase untouched. Need to craft minimal SMT to reproduce and file upstream.","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2025-10-26T22:16:05.350239089+07:00","updated_at":"2025-10-28T08:37:01.824525912+07:00"}
{"id":"regex-21","title":"Switch Z3 direct backend to enumeration sorts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-27T04:57:44.953417625+07:00","updated_at":"2025-10-27T05:01:09.293664007+07:00","closed_at":"2025-10-27T05:01:09.293664007+07:00"}
{"id":"regex-22","title":"Z3 enum hot solver crashes after 5 puzzles","description":"","notes":"Rebuilt hot solver to allocate fresh state vars per puzzle, eliminating Z3 SIGSEGV; verified 10-day hot profile succeeds.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-27T05:22:14.089890364+07:00","updated_at":"2025-10-27T05:36:59.722210438+07:00","closed_at":"2025-10-27T05:36:59.722213786+07:00","dependencies":[{"issue_id":"regex-22","depends_on_id":"regex-21","type":"discovered-from","created_at":"2025-10-27T05:22:14.093593003+07:00","created_by":"daemon"}]}
{"id":"regex-23","title":"Z3 enum hot solver still crashes for ranges \u003e~5 puzzles","description":"Commands such as:\\n  cabal run regexle-haskell -- profile --side 3 --days 0..49 --strategy z3 --hot-solver --output /tmp/foo.json\\nabort with SIGSEGV/SIGABRT even after the per-clue state var refresh. Running \\\u003c=5 puzzles per CLI invocation succeeds, so the 0..409 profile had to be assembled from many 5-day chunks. Need to find the remaining root cause inside Z3/local push-pop reuse.","notes":"Captured a two-stage shrink pipeline: stage 1 shrinks JSON params (side/chunk/days) using a SIGSEGV-only test to find the smallest crashing day set (using seeds 7,13,23,37,53); stage 2 captures a dump for that set and shrinks the SMT corpus with the same segfault predicate. Scripts: test_hot_params.py, capture_segfault_dump.sh, capture_and_shrink.sh, double_shrink.sh.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-27T06:22:01.056252087+07:00","updated_at":"2025-10-28T08:14:35.18415976+07:00","closed_at":"2025-10-28T08:14:35.18415976+07:00","dependencies":[{"issue_id":"regex-23","depends_on_id":"regex-22","type":"discovered-from","created_at":"2025-10-27T06:22:01.068132364+07:00","created_by":"daemon"}]}
{"id":"regex-3","title":"Add nelhage-sandbox submodule","description":"Add https://github.com/nelhage/nelhage-sandbox as a git submodule in the repo to reuse benchmark assets.","notes":"Added git submodule at third_party/nelhage-sandbox for benchmark assets.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-23T08:07:05.748338213+07:00","updated_at":"2025-10-23T08:19:54.26127242+07:00","closed_at":"2025-10-23T08:19:54.26127242+07:00","dependencies":[{"issue_id":"regex-3","depends_on_id":"regex-1","type":"discovered-from","created_at":"2025-10-23T08:07:05.769030794+07:00","created_by":"mark"}]}
{"id":"regex-4","title":"Select Haskell FSM library","description":"Survey Haskell libraries that can replace greenery for DFA/NFA manipulation, evaluating suitability for regex crossword solving.","notes":"HaLeX: regex parser + NDFA/DFA pipeline with minimization and GraphViz export (Main.DFA, Main.RegExp modules), but last upload 1.2.6 in 2017 targeting GHC 6.8—expect patching before integrating. kleene: derivative-based regex compiler that returns minimized DFAs with explicit transition lookup, works for any Ord alphabet, exposes helpers like dfaBlackholes for dead states and toDot for visualization, and maps regex literals to AST via compile. Likely starting point for SBV integration: use kleene for DFA + pruning data, optionally borrow HaLeX minimizer if kleene gaps appear.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T08:07:13.781364004+07:00","updated_at":"2025-10-23T08:30:29.019615765+07:00","closed_at":"2025-10-23T08:30:29.019615765+07:00","dependencies":[{"issue_id":"regex-4","depends_on_id":"regex-1","type":"discovered-from","created_at":"2025-10-23T08:07:13.798441352+07:00","created_by":"mark"}]}
{"id":"regex-5","title":"Outline SBV-based solver","description":"Draft design for regexle solver using the Haskell SBV library, including data flow, constraint encoding, and integration points with benchmarks.","notes":"Drafted SBV solver outline in docs/sbv-solver-outline.md covering DFA generation with kleene, SBV grid/state encoding, dead-state pruning, and benchmark integration hooks.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T08:07:26.805619928+07:00","updated_at":"2025-10-23T09:10:51.663015476+07:00","closed_at":"2025-10-23T09:10:51.663015476+07:00","dependencies":[{"issue_id":"regex-5","depends_on_id":"regex-1","type":"discovered-from","created_at":"2025-10-23T08:07:26.826858858+07:00","created_by":"mark"}]}
{"id":"regex-6","title":"Plan cross-language benchmarks","description":"Define benchmarking strategy comparing Python regexle, Haskell SBV implementation, and alternative Haskell approaches, leveraging nelhage-sandbox scripts.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-10-23T08:07:36.985664506+07:00","updated_at":"2025-10-23T11:58:36.987021638+07:00","dependencies":[{"issue_id":"regex-6","depends_on_id":"regex-1","type":"discovered-from","created_at":"2025-10-23T08:07:37.00215178+07:00","created_by":"mark"}]}
{"id":"regex-7","title":"Port nelhage puzzle fetch + cache","description":"Adapt Nelson's puzzle retrieval and local caching logic (regexle API + ~/.cache layout) for reuse in the Haskell benchmarking workflow.","notes":"Added cabal project scaffolding with library module Regexle.PuzzleCache exposing cacheRoot/puzzleCachePath/fetchPuzzle. Implementation mirrors Python flow: uses XDG cache (~/.cache/regexle), decodes cached JSON when present, otherwise fetches https://generator.regexle.com/api via http-client, validates HTTP 200, stores body, and parses puzzle schema. Executable now fetches day/side args and prints JSON.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T08:27:35.326523302+07:00","updated_at":"2025-10-23T08:49:46.852524987+07:00","closed_at":"2025-10-23T08:49:46.852524987+07:00","dependencies":[{"issue_id":"regex-7","depends_on_id":"regex-2","type":"discovered-from","created_at":"2025-10-23T08:27:35.341037972+07:00","created_by":"mark"},{"issue_id":"regex-7","depends_on_id":"regex-1","type":"blocks","created_at":"2025-10-23T08:27:35.345053428+07:00","created_by":"mark"}]}
{"id":"regex-8","title":"Implement DFA pruning constraints","description":"Ensure SBV solver enforces dead-state and dead-vocab pruning analogous to Nelson's numpy analysis for faster solving.","notes":"Implemented SBV-based solver using kleene DFA transitions with dead-state pruning (src/Regexle/Solver.hs). Added regex parser (Regexle.RegexParser) translating puzzle regex to Kleene ERE. CLI matrix/profile now run the solver: matrix records build/solve times, solution grid, or error if Z3 missing; profile aggregates solved count and averages. Tested with Z3 4.8.12 (Ubuntu package) producing solutions for days 400-402.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-23T08:28:00.307179721+07:00","updated_at":"2025-10-23T11:40:29.272162561+07:00","closed_at":"2025-10-23T10:27:03.976460286+07:00","dependencies":[{"issue_id":"regex-8","depends_on_id":"regex-2","type":"discovered-from","created_at":"2025-10-23T08:28:00.324533843+07:00","created_by":"mark"},{"issue_id":"regex-8","depends_on_id":"regex-5","type":"blocks","created_at":"2025-10-23T08:28:00.331059947+07:00","created_by":"mark"}]}
{"id":"regex-9","title":"Port benchmark matrix to Haskell","description":"Translate Nelson's profile/matrix benchmarking harness into Haskell to run comparisons across solver strategies.","notes":"Matrix/profile commands now wired to SBV solver. With Z3 installed (4.8.12), matrix side=3 days 400-402 solved puzzles in ~1.0-1.9s build, 0.07-0.13s solve; profile summarized 3/3 solved with avg build 1.53s, solve 0.106s.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T08:28:21.528788622+07:00","updated_at":"2025-10-23T11:40:42.887678214+07:00","closed_at":"2025-10-23T10:37:53.824360689+07:00","dependencies":[{"issue_id":"regex-9","depends_on_id":"regex-2","type":"discovered-from","created_at":"2025-10-23T08:28:21.542659495+07:00","created_by":"mark"},{"issue_id":"regex-9","depends_on_id":"regex-6","type":"blocks","created_at":"2025-10-23T08:28:21.549078258+07:00","created_by":"mark"}]}
